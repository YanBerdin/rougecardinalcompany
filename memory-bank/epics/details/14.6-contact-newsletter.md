# Epic : Contact & Newsletter

## "Formulaire de contact sécurisé"

**As a** visiteur  
**I want** remplir un formulaire sécurisé  
**So that** je puisse poser une question ou faire une demande à l'équipe

_Acceptance Criteria:_

- [ ] GIVEN : que je suis sur la page Contact  
- [ ] WHEN : j'affiche le formulaire  
- [ ] THEN : je vois les champs obligatoires : prénom, nom, email, téléphone (optionnel), motif, sujet, message, case RGPD  
- [ ] AND : un captcha anti‑spam est présent et fonctionnel  
- [ ] AND : le bouton d’envoi est désactivé tant que tous les champs obligatoires ne sont pas valides  
- [ ] AND : les données sont transmises en HTTPS

---

## "Accusé de réception automatique"

**As a** visiteur  
**I want** recevoir un accusé de réception automatique après envoi du formulaire  
**So that** je sois certain que ma demande a été prise en compte

_Acceptance Criteria:_

- [ ] GIVEN : que j’ai soumis un formulaire valide  
- [ ] WHEN : l’envoi est confirmé côté serveur  
- [ ] THEN : un email automatique est envoyé à l’adresse indiquée, reprenant les informations soumises et les délais de réponse estimés

---

## "Consulter et traiter les messages reçus"

**As an** admin  
**I want** consulter et traiter les messages reçus via le formulaire  
**So that** je gère efficacement les demandes

_Acceptance Criteria:_

- [ ] Interface back‑office listant les messages avec tri et filtres (date, motif, statut)  
- [ ] Possibilité de marquer un message comme traité / en cours / en attente  
- [ ] Consultation du détail complet d’un message  
- [ ] Journalisation de l’ouverture et de l’état

---

## "Coordonnées visibles sur la page"

**As a** visiteur  
**I want** voir les coordonnées de la compagnie (email, téléphone, adresse, horaires, contacts spécialisés)  
**So that** je puisse contacter directement la bonne personne

_Acceptance Criteria:_

- [ ] Affichage dans une section dédiée avec icônes correspondantes  
- [ ] Email et téléphone cliquables (mailto: / tel:)  
- [ ] Mise à jour dynamique si les données changent côté back‑office

---

## "CRUD Coordonnées"

**As an** admin  
**I want** ajouter / modifier / supprimer les coordonnées affichées sur la page Contact  
**So that** elles restent à jour

_Acceptance Criteria:_

- [ ] Formulaire back‑office complet avec champs : Nom de la compagnie, adresse, email, téléphone, horaires, contacts spécialisés (email presse)
- [ ] Validation des champs obligatoires  
- [ ] Suppression avec confirmation  
- [ ] Historisation dans `audit_logs`  
- [ ] Changement visible immédiatement côté front

---

## "Inscription newsletter avec double opt‑in"

**As a** visiteur  
**I want** m’inscrire avec mon email via le formulaire newsletter  
**So that** je reçoive les actualités de la compagnie

_Acceptance Criteria:_

- [ ] GIVEN : que je suis sur la page Contact ou un autre emplacement intégrant le module newsletter  
- [ ] WHEN : je saisis mon email et clique sur "S'abonner"  
- [ ] THEN : un email de confirmation est envoyé (double opt‑in RGPD)  
- [ ] AND : l’abonnement n’est effectif qu’après clic sur le lien de confirmation  
- [ ] AND : un lien de désinscription est présent dans chaque envoi

---

## "Désinscription newsletter"

**As an** abonné  
**I want** me désinscrire facilement  
**So that** j’exerce mon droit de retrait

_Acceptance Criteria:_

- [ ] Lien de désinscription unique présent dans chaque email  
- [ ] Confirmation de désinscription affichée côté front  
- [ ] Email supprimé ou marqué comme "désinscrit" en base de données

---

## "Exporter la liste des abonnés"

**As an** admin  
**I want** exporter la liste des abonnés au format CSV  
**So that** je puisse gérer mes campagnes email dans un outil externe

_Acceptance Criteria:_

- [ ] Bouton "Exporter CSV" dans le back‑office newsletter  
- [ ] Fichier CSV contenant : email, date d’inscription, statut (actif/désinscrit)  
- [ ] Export limité aux administrateurs

---

## "Voir statistiques d’abonnement"

**As an** admin  
**I want** consulter les statistiques d’abonnement newsletter  
**So that** je mesure l’engagement

_Acceptance Criteria:_

- [ ] Graphiques et chiffres clés (abonnés actifs, nouveaux abonnés, désinscriptions)  
- [ ] Filtre par période  
- [ ] Données actualisées en temps réel ou via rafraîchissement manuel

---

## "Toggle affichage CTA newsletter (Page Contact)"

**As an** admin  
**I want** activer/désactiver l’affichage de la section "Abonnement Newsletter" sur la page Contact  
**So that** je choisis de la mettre en avant ou non

_Acceptance Criteria:_

- [ ] Toggle disponible dans le BackOffice pour les pages (Agenda, Accueil, Contact)
- [ ] WHEN : le toggle est activé  
- [ ] THEN : la section newsletter apparaît côté front sur la page Contact  
- [ ] WHEN : il est désactivé  
- [ ] THEN : la section n’est pas affichée  
- [ ] Changement visible immédiatement sans redéploiement  
- [ ] Journalisation dans `logs_audit`
