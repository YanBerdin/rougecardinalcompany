# ============================================================================
#* ðŸ—„ï¸ SUPABASE CONFIGURATION (Required)
# ============================================================================
# Get these from: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_OR_ANON_KEY=your-anon-key

# Admin operations (user invitation, role management)
# âš ï¸ CRITICAL: Never commit to version control!
# Get it from: https://app.supabase.com/project/_/settings/api > Service Role Key
# Used for: Admin operations (user invitation, role management)
# âŒ LEGACY FORMAT - Only use if not migrated to JWT Signing Keys
# âŒ NEXT_PUBLIC_SUPABASE_ANON_KEY=old_anon_key
# âŒ SUPABASE_SERVICE_ROLE_KEY=old_service_role_key
SUPABASE_SECRET_KEY=your-service-role-key

# Site URL (for invitation links)
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# ============================================================================
#* ðŸŒ APPLICATION CONFIGURATION (Required)
# ============================================================================
# Site URL (used for invitation links, redirects)
# Development: http://localhost:3000
# Production: https://rougecardinalcompany.fr
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# ============================================================================
# ðŸ” ADMIN SEEDING (Optional - Local Development)
# ============================================================================
# Used by scripts/create-admin-user.ts for local database seeding
# ADMIN SEEDING (for db:seed-admin script)
DEFAULT_ADMIN_EMAIL=admin@rougecardinal.com
#! DEFAULT_ADMIN_PASSWORD=Admin123!

# ============================================================================
# ðŸ“§ EMAIL CONFIGURATION (Resend - Required)
# ============================================================================
# DEVELOPMENT EMAIL REDIRECT
# When `EMAIL_DEV_REDIRECT` is `true` and you run the app in development,
# invitation emails will be redirected to `EMAIL_DEV_REDIRECT_TO`.
# This is intended for local testing with providers that restrict recipients (eg. Resend test-mode).

# Resend API Key (required for email sending)
RESEND_API_KEY=your_resend_api_key

# Email sender address (must be verified in Resend dashboard)
EMAIL_FROM=noreply@rougecardinalcompany.fr

# Contact email for admin notifications
EMAIL_CONTACT=contact@rougecardinalcompany.fr

# ============================================================================
# ðŸš¨ DEVELOPMENT EMAIL REDIRECT (DEV ONLY)
# ============================================================================
#
# âš ï¸  CRITICAL WARNING: This feature MUST be disabled in production!
#
# When enabled, ALL invitation emails will be redirected to EMAIL_DEV_REDIRECT_TO
# regardless of the recipient's actual email address.
#
# Purpose: Test invitation flow locally without sending real emails
#
#* Activation requirements: 
# NODE_ENV='development' 
# EMAIL_DEV_REDIRECT='true'
#
# âŒ DO NOT enable this in production - it will redirect real user invitations!
# âœ… Safe values for production: 'false', undefined, or omit entirely
#
EMAIL_DEV_REDIRECT=false
EMAIL_DEV_REDIRECT_TO=yandevformation@gmail.com

# ============================================================================
# Deployment Checklist:
# 1. EMAIL_DEV_REDIRECT must be 'false' or undefined
# 2. EMAIL_FROM must be a verified domain in Resend
# 3. RESEND_API_KEY must be production key (not test mode)
# ============================================================================

# ============================================================================
# ðŸ§ª TESTING & DEVELOPMENT (Optional)
# ============================================================================
TEST_DB_URL=...
GITHUB_TOKEN=...
CONTEXT7_API_KEY=...

# ============================================================================
# ðŸ¤– MCP TOOLS & CI/CD (Optional - External tooling only)
# ============================================================================
# These variables are used by MCP Supabase tools and CI/CD pipelines.
# They are NOT required for the Next.js application to run.
# 
# Used by:
# - Claude MCP Supabase tools (database operations via MCP)
# - GitHub Actions workflows (database migrations, testing)
# - Supabase CLI commands in CI/CD
#
# Safe to omit if you're only running the Next.js app locally.

SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_ACCESS_TOKEN=your-access-token

# ============================================================================
# âš™ï¸ ENVIRONMENT (Auto-detected by Next.js)
# ============================================================================
# Values: development | test | production
# Usually set automatically - no need to specify
# NODE_ENV=development

# ============================================================================
# ï¿½ EDGE FUNCTIONS - DATA RETENTION (TASK053)
# ============================================================================
# Token d'authentification pour l'Edge Function scheduled-cleanup
# ProtÃ¨ge l'endpoint contre les appels non autorisÃ©s
#
# GÃ©nÃ©ration: openssl rand -base64 32
# Configuration:
#   - Local: supabase/functions/.env.local
#   - Production: Supabase Dashboard > Edge Functions > Secrets
#
# UtilisÃ© par: pg_cron job pour dÃ©clencher le nettoyage quotidien Ã  2h UTC
CRON_SECRET=your-generated-cron-secret

# ============================================================================
# ï¿½ðŸš€ DEPLOYMENT CHECKLIST
# ============================================================================
# Before deploying to production, verify:
# 
# âœ… EMAIL_DEV_REDIRECT is 'false' or undefined
# âœ… EMAIL_FROM is a verified domain in Resend
# âœ… RESEND_API_KEY is production key (not test mode)
# âœ… SUPABASE_SECRET_KEY is kept secret (use env vars in hosting platform)
# âœ… NEXT_PUBLIC_SITE_URL points to production domain
# ============================================================================

# ============================================================================
# ðŸ”’ T3 ENV VALIDATION
# ============================================================================
# T3 Env validates all required variables at build/runtime.
# Missing or invalid variables will cause immediate failure with clear errors.
#
# To skip validation during CI/CD build (not recommended):
# SKIP_ENV_VALIDATION=true
# ============================================================================
